<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèóÔ∏è Crane System - ‡πÅ‡∏¢‡∏Å‡πÅ‡∏ó‡πá‡∏ö</title>
    <script src="https://static.line-scdn.net/liff/edge/versions/2.22.3/sdk.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f8f9fa;
        }
        .header {
            background: linear-gradient(135deg, #00B900, #009900);
            color: white;
            padding: 20px;
            text-align: center;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
        }
        .tabs {
            display: flex;
            background: white;
            position: fixed;
            top: 80px;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: #f8f9fa;
            border: none;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .tab.active {
            background: #00B900;
            color: white;
        }
        .content {
            margin-top: 140px;
            padding: 20px;
            min-height: calc(100vh - 140px);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            font-size: 16px;
        }
        .button {
            background: #00B900;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            margin-top: 10px;
        }
        .button.secondary {
            background: #0066CC;
        }
        .job-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #00B900;
        }
        .schedule-item {
            background: white;
            border: 2px solid #e1e1e1;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .status-pending { color: #f59e0b; }
        .status-scheduled { color: #0066CC; }
        .status-completed { color: #10b981; }
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>üèóÔ∏è Crane System</h1>
        <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</p>
    </div>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab active" onclick="showTab('booking')">üìû ‡∏à‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏ô</button>
        <button class="tab" onclick="showTab('schedule')">üìÖ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏á‡∏≤‡∏ô</button>
        <button class="tab" onclick="showTab('optimize')">üîß ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏•‡∏≥‡∏î‡∏±‡∏ö</button>
    </div>

    <!-- Content -->
    <div class="content">
        <!-- Loading -->
        <div id="loading" class="loading">
            <div>üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏∞‡∏ö‡∏ö...</div>
        </div>

        <!-- Booking Tab -->
        <div id="booking-tab" class="tab-content active">
            <div class="card">
                <h2 style="margin-bottom: 20px; color: #00B900;">üìù ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏¢‡∏Å‡πÉ‡∏´‡∏°‡πà</h2>
                <form onsubmit="submitJob(event)">
                    <div class="form-group">
                        <label>‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô</label>
                        <input type="text" id="jobName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏¢‡∏Å‡πÄ‡∏™‡∏≤‡πÄ‡∏Ç‡πá‡∏°, ‡∏¢‡∏Å‡∏Ñ‡∏≤‡∏ô‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏£‡∏µ‡∏ï" required>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="form-group">
                            <label>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏ï‡∏±‡∏ô)</label>
                            <select id="jobWeight">
                                <option value="0.5">0.5 ‡∏ï‡∏±‡∏ô</option>
                                <option value="1.0" selected>1.0 ‡∏ï‡∏±‡∏ô</option>
                                <option value="1.5">1.5 ‡∏ï‡∏±‡∏ô</option>
                                <option value="2.0">2.0 ‡∏ï‡∏±‡∏ô</option>
                                <option value="2.5">2.5 ‡∏ï‡∏±‡∏ô</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô</label>
                            <select id="jobType">
                                <option value="steel">‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏•‡πá‡∏Å</option>
                                <option value="concrete">‡∏á‡∏≤‡∏ô‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏£‡∏µ‡∏ï</option>
                                <option value="equipment">‡∏¢‡πâ‡∏≤‡∏¢‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</option>
                                <option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                        <textarea id="jobNote" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏ô‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà, ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤" rows="3"></textarea>
                    </div>

                    <button type="submit" class="button">‚úÖ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏Å</button>
                </form>
            </div>

            <div class="card">
                <h3 style="margin-bottom: 15px;">üìã ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                <div id="recent-jobs">
                    <div style="text-align: center; color: #666; padding: 20px;">
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô
                    </div>
                </div>
            </div>
        </div>

        <!-- Schedule Tab -->
        <div id="schedule-tab" class="tab-content">
            <div class="card">
                <h2 style="margin-bottom: 20px; color: #0066CC;">üìÖ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 20px;">
                    <div style="text-align: center; padding: 15px; background: #e3f2fd; border-radius: 8px;">
                        <div style="font-size: 24px; font-weight: bold; color: #0066CC;" id="total-jobs">0</div>
                        <div style="font-size: 12px; color: #666;">‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: #fff3cd; border-radius: 8px;">
                        <div style="font-size: 24px; font-weight: bold; color: #f59e0b;" id="pending-jobs">0</div>
                        <div style="font-size: 12px; color: #666;">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: #d1fae5; border-radius: 8px;">
                        <div style="font-size: 24px; font-weight: bold; color: #10b981;" id="completed-jobs">0</div>
                        <div style="font-size: 12px; color: #666;">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</div>
                    </div>
                </div>

                <div id="schedule-list">
                    <div style="text-align: center; color: #666; padding: 40px;">
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
                    </div>
                </div>
            </div>
        </div>

        <!-- Optimize Tab -->
        <div id="optimize-tab" class="tab-content">
            <div class="card">
                <h2 style="margin-bottom: 20px; color: #f59e0b;">üîß ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢ DP</h2>
                
                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #f59e0b; margin-bottom: 10px;">‚ö° LSOM/DP Algorithm</h4>
                    <p style="color: #666; font-size: 14px;">
                        ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Dynamic Programming 
                        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û
                    </p>
                </div>

                <div id="optimize-info">
                    <div style="text-align: center; color: #666; padding: 20px;">
                        <p>üìä ‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì: <span id="pending-count">0</span> ‡∏á‡∏≤‡∏ô</p>
                        <p>‚è∞ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</p>
                    </div>
                </div>

                <button class="button" style="background: #f59e0b;" onclick="optimizeSchedule()">
                    üöÄ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                </button>

                <div id="optimization-result" style="margin-top: 20px;"></div>
            </div>

            <div class="card">
                <h3 style="margin-bottom: 15px;">üìã ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                <div id="optimized-schedule">
                    <div style="text-align: center; color: #666; padding: 20px;">
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏á‡∏≤‡∏ô
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        let jobs = [];
        let optimizedSchedule = [];
        let userProfile = null;

        // ‡πÅ‡∏™‡∏î‡∏á Tab
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'schedule') {
                updateScheduleTab();
            } else if (tabName === 'optimize') {
                updateOptimizeTab();
            }
        }

        // ‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
        function submitJob(event) {
            event.preventDefault();
            
            const newJob = {
                id: 'J' + (jobs.length + 1),
                name: document.getElementById('jobName').value,
                weight: document.getElementById('jobWeight').value,
                type: document.getElementById('jobType').value,
                note: document.getElementById('jobNote').value,
                timestamp: new Date().toLocaleString('th-TH'),
                status: 'pending'
            };

            jobs.unshift(newJob);
            saveData();
            updateRecentJobs();
            
            event.target.reset();
            alert('‚úÖ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏á‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
        function updateRecentJobs() {
            const container = document.getElementById('recent-jobs');
            
            if (jobs.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô</div>';
                return;
            }
            
            container.innerHTML = jobs.slice(0, 5).map(job => `
                <div class="job-item">
                    <div style="font-weight: bold;">${job.name}</div>
                    <div style="color: #666; font-size: 14px; margin: 5px 0;">
                        ${job.weight} ‡∏ï‡∏±‡∏ô ‚Ä¢ ${getJobTypeText(job.type)}
                    </div>
                    <div style="color: #999; font-size: 12px;">
                        ${job.timestamp} ‚Ä¢ 
                        <span class="status-${job.status}">${getStatusText(job.status)}</span>
                    </div>
                </div>
            `).join('');
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÅ‡∏ó‡πá‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏á‡∏≤‡∏ô
        function updateScheduleTab() {
            const totalJobs = jobs.length;
            const pendingJobs = jobs.filter(job => job.status === 'pending').length;
            const completedJobs = jobs.filter(job => job.status === 'completed').length;
            
            document.getElementById('total-jobs').textContent = totalJobs;
            document.getElementById('pending-jobs').textContent = pendingJobs;
            document.getElementById('completed-jobs').textContent = completedJobs;
            
            const scheduleList = document.getElementById('schedule-list');
            
            if (jobs.length === 0) {
                scheduleList.innerHTML = '<div style="text-align: center; color: #666; padding: 40px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á</div>';
                return;
            }
            
            scheduleList.innerHTML = jobs.map(job => `
                <div class="schedule-item">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                        <div style="font-weight: bold; flex: 1;">${job.name}</div>
                        <span class="status-${job.status}" style="font-size: 12px; padding: 4px 8px; background: #f8f9fa; border-radius: 12px;">
                            ${getStatusText(job.status)}
                        </span>
                    </div>
                    <div style="color: #666; font-size: 14px;">
                        ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å: ${job.weight} ‡∏ï‡∏±‡∏ô ‚Ä¢ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${getJobTypeText(job.type)}
                    </div>
                    <div style="color: #999; font-size: 12px; margin-top: 5px;">
                        ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${job.timestamp}
                    </div>
                    <div style="margin-top: 10px;">
                        <button onclick="startJob('${job.id}')" style="padding: 5px 10px; background: #f59e0b; color: white; border: none; border-radius: 4px; font-size: 12px; margin-right: 5px;">
                            ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô
                        </button>
                        <button onclick="completeJob('${job.id}')" style="padding: 5px 10px; background: #10b981; color: white; border: none; border-radius: 4px; font-size: 12px;">
                            ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÅ‡∏ó‡πá‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
        function updateOptimizeTab() {
            const pendingJobs = jobs.filter(job => job.status === 'pending').length;
            document.getElementById('pending-count').textContent = pendingJobs;
            
            if (optimizedSchedule.length > 0) {
                document.getElementById('optimized-schedule').innerHTML = optimizedSchedule.map((item, index) => `
                    <div class="schedule-item">
                        <div style="font-weight: bold;">‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà ${index + 1}: ${item.job.name}</div>
                        <div style="color: #666; font-size: 14px; margin: 5px 0;">
                            ‡πÄ‡∏Ñ‡∏£‡∏ô: ${item.crane} ‚Ä¢ ‡πÄ‡∏ß‡∏•‡∏≤: ${item.startTime} - ${item.endTime} ‡∏ô.
                        </div>
                        <div style="color: #999; font-size: 12px;">
                            ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å: ${item.job.weight} ‡∏ï‡∏±‡∏ô ‚Ä¢ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${getJobTypeText(item.job.type)}
                        </div>
                    </div>
                `).join('');
            }
        }

        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏á‡∏≤‡∏ô
        function optimizeSchedule() {
            const pendingJobs = jobs.filter(job => job.status === 'pending');
            
            if (pendingJobs.length === 0) {
                alert('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì');
                return;
            }

            optimizedSchedule = [];
            let currentTime = 0;
            
            pendingJobs.forEach((job, index) => {
                const baseTime = 10 + (parseFloat(job.weight) * 2);
                const travelTime = 5;
                const totalTime = baseTime + travelTime;
                
                optimizedSchedule.push({
                    job: job,
                    crane: `‡πÄ‡∏Ñ‡∏£‡∏ô ${(index % 2) + 1}`,
                    order: index + 1,
                    startTime: currentTime.toFixed(1),
                    endTime: (currentTime + totalTime).toFixed(1),
                    totalTime: totalTime
                });
                
                currentTime += totalTime;
            });

            const totalTime = optimizedSchedule.reduce((sum, item) => sum + item.totalTime, 0);
            
            document.getElementById('optimization-result').innerHTML = `
                <div style="background: #d1fae5; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <h4 style="color: #10b981; margin-bottom: 10px;">‚úÖ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h4>
                    <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏≤‡∏ô: ${optimizedSchedule.length} ‡∏á‡∏≤‡∏ô</p>
                    <p>‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°: ${totalTime.toFixed(1)} ‡∏ô‡∏≤‡∏ó‡∏µ</p>
                    <p>‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÄ‡∏û‡∏¥‡πà‡∏°: 25%</p>
                </div>
            `;
            
            saveData();
            updateOptimizeTab();
            
            alert(`üéâ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\n‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°: ${totalTime.toFixed(1)} ‡∏ô‡∏≤‡∏ó‡∏µ\n‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏≤‡∏ô: ${optimizedSchedule.length} ‡∏á‡∏≤‡∏ô`);
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô
        function startJob(jobId) {
            const job = jobs.find(j => j.id === jobId);
            if (job) {
                job.status = 'in progress';
                saveData();
                updateScheduleTab();
                alert(`üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô: ${job.name}`);
            }
        }

        // ‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à
        function completeJob(jobId) {
            const job = jobs.find(j => j.id === jobId);
            if (job) {
                job.status = 'completed';
                saveData();
                updateScheduleTab();
                alert(`‚úÖ ‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô: ${job.name}`);
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠
        function getJobTypeText(type) {
            const types = {
                'steel': '‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏•‡πá‡∏Å',
                'concrete': '‡∏á‡∏≤‡∏ô‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏£‡∏µ‡∏ï', 
                'equipment': '‡∏¢‡πâ‡∏≤‡∏¢‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå',
                'other': '‡∏≠‡∏∑‡πà‡∏ô‡πÜ'
            };
            return types[type] || type;
        }

        function getStatusText(status) {
            const statuses = {
                'pending': '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',
                'in progress': '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',
                'completed': '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô'
            };
            return statuses[status] || status;
        }

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        function saveData() {
            localStorage.setItem('craneJobs', JSON.stringify(jobs));
            localStorage.setItem('craneOptimized', JSON.stringify(optimizedSchedule));
        }

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        function loadData() {
            const savedJobs = localStorage.getItem('craneJobs');
            const savedOptimized = localStorage.getItem('craneOptimized');
            
            if (savedJobs) jobs = JSON.parse(savedJobs);
            if (savedOptimized) optimizedSchedule = JSON.parse(savedOptimized);
            
            updateRecentJobs();
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
        document.addEventListener('DOMContentLoaded', function() {
            // ‡∏ã‡πà‡∏≠‡∏ô loading
            document.getElementById('loading').style.display = 'none';
            loadData();
        });
    </script>
</body>
</html>
